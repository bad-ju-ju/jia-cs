<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jia Sourcing â€” Setup</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="app-layout">
    <aside class="sidebar" id="sidebar"></aside>

    <main class="main-content">
      <!-- Step 1: Upload -->
      <div id="step-upload">
        <div class="page-header" style="text-align: center; max-width: 600px; margin: 0 auto 40px;">
          <div style="font-size: 48px; margin-bottom: 16px;">ğŸ‰</div>
          <h1
            style="font-size: 32px; margin-bottom: 12px; background: linear-gradient(90deg, rgb(159, 202, 237) 0%, rgb(206, 182, 218) 33%, rgb(235, 172, 201) 66%, rgb(252, 206, 192) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
            Introducing: Sourcing
          </h1>
          <p class="subtitle" style="font-size: 16px; line-height: 1.6;">
            Find the right candidates already in your database â€” powered by AI.
            <br>Upload your candidate database to get started.
          </p>
        </div>

        <!-- Progress indicator -->
        <div style="display: flex; justify-content: center; gap: 8px; margin-bottom: 40px;">
          <div style="display: flex; align-items: center; gap: 6px;">
            <div
              style="width: 28px; height: 28px; border-radius: 50%; background: #1a1a2e; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; color: white;">
              1</div>
            <span style="font-size: 13px; color: #32325d; font-weight: 500;">Upload</span>
          </div>
          <div style="width: 40px; height: 1px; background: #e2e8f0; margin-top: 14px;"></div>
          <div style="display: flex; align-items: center; gap: 6px;">
            <div
              style="width: 28px; height: 28px; border-radius: 50%; background: #f1f5f9; border: 1px solid #e2e8f0; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; color: #8898aa;">
              2</div>
            <span style="font-size: 13px; color: #8898aa; font-weight: 500;">AI Parsing</span>
          </div>
          <div style="width: 40px; height: 1px; background: #e2e8f0; margin-top: 14px;"></div>
          <div style="display: flex; align-items: center; gap: 6px;">
            <div
              style="width: 28px; height: 28px; border-radius: 50%; background: #f1f5f9; border: 1px solid #e2e8f0; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; color: #8898aa;">
              3</div>
            <span style="font-size: 13px; color: #8898aa; font-weight: 500;">Ready</span>
          </div>
        </div>

        <!-- Upload zone -->
        <div style="max-width: 560px; margin: 0 auto;">
          <div class="upload-zone" id="uploadZone" onclick="startProcessing()">
            <div class="upload-icon">ğŸ“</div>
            <div class="upload-text">Drag & drop your candidate database here</div>
            <div class="upload-hint" style="margin-bottom: 16px;">or click to browse files</div>
            <div style="display: flex; justify-content: center; gap: 8px; flex-wrap: wrap;">
              <span class="badge badge-purple">.csv</span>
              <span class="badge badge-purple">.xlsx</span>
              <span class="badge badge-purple">.json</span>
            </div>
            <div class="upload-hint" style="margin-top: 12px;">Max file size: 50MB</div>
          </div>
        </div>
      </div>

      <!-- Step 2: AI Processing -->
      <div id="step-processing" style="display: none;">
        <div class="page-header" style="text-align: center; max-width: 600px; margin: 0 auto 40px;">
          <h1
            style="font-size: 28px; margin-bottom: 12px; background: linear-gradient(90deg, rgb(159, 202, 237) 0%, rgb(206, 182, 218) 33%, rgb(235, 172, 201) 66%, rgb(252, 206, 192) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
            AI is Parsing Your Database
          </h1>
          <p class="subtitle">This usually takes about 2 minutes</p>
        </div>

        <div style="max-width: 560px; margin: 0 auto;">
          <div class="glass-card no-hover" style="margin-bottom: 24px;">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <span style="font-size: 14px; color: var(--jia-text-secondary);">ğŸ“„ candidates_2024.csv</span>
              <span class="progress-percent"
                style="font-size: 14px; font-weight: 600; color: var(--jia-text-secondary);">0%</span>
            </div>
            <div class="progress-track" style="margin-bottom: 20px;">
              <div class="progress-fill" style="width: 0%;"></div>
            </div>
            <div id="processing-log" style="font-size: 13px; color: var(--jia-text-muted); min-height: 160px;">
              <!-- Populated by JS -->
            </div>
          </div>

          <p class="progress-status" style="text-align: center; font-size: 13px; color: var(--jia-text-muted);">
            Starting...
          </p>
        </div>
      </div>

      <!-- Step 3: Ready -->
      <div id="step-ready" style="display: none;">
        <div class="page-header" style="text-align: center; max-width: 600px; margin: 0 auto 40px;">
          <div style="font-size: 48px; margin-bottom: 16px;">ğŸ‰</div>
          <h1
            style="font-size: 32px; margin-bottom: 12px; background: linear-gradient(90deg, rgb(159, 202, 237) 0%, rgb(206, 182, 218) 33%, rgb(235, 172, 201) 66%, rgb(252, 206, 192) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
            Your Database is Ready!
          </h1>
          <p class="subtitle" style="font-size: 15px;">AI has indexed your candidates. Here's what we found:</p>
        </div>

        <div class="stats-grid stagger" style="max-width: 700px; margin: 0 auto 32px;">
          <div class="stat-card animate-fade-in-up">
            <div class="stat-value" data-count="12450">0</div>
            <div class="stat-label">Total Profiles</div>
          </div>
          <div class="stat-card animate-fade-in-up">
            <div class="stat-value" data-count="47">0</div>
            <div class="stat-label">Unique Titles</div>
          </div>
          <div class="stat-card animate-fade-in-up">
            <div class="stat-value" data-count="156">0</div>
            <div class="stat-label">Skills Found</div>
          </div>
          <div class="stat-card animate-fade-in-up">
            <div class="stat-value" data-count="8100">0</div>
            <div class="stat-label">Dormant (90+ days)</div>
          </div>
        </div>

        <div style="max-width: 700px; margin: 0 auto 32px;">
          <div class="insight-card">
            <span class="insight-icon">ğŸ’¡</span>
            <div>
              <strong style="color: var(--jia-text-primary);">Quick insight:</strong> 65% of your candidates haven't
              been contacted in 3+ months. Sourcing can help you re-engage them with personalized, AI-powered outreach.
            </div>
          </div>
        </div>

        <div style="display: flex; justify-content: center; gap: 12px;">
          <a href="search.html" class="btn-primary" style="font-size: 16px; padding: 14px 32px;">
            ğŸš€ Start Sourcing
          </a>
          <button class="btn-secondary" onclick="showToast('Database settings opened')">
            âš™ï¸ Review Database Settings
          </button>
        </div>
      </div>
    </main>
  </div>

  <script src="app.js"></script>
  <script>
    function startProcessing() {
      document.getElementById('step-upload').style.display = 'none';
      document.getElementById('step-processing').style.display = 'block';

      const log = document.getElementById('processing-log');
      const steps = [
        { text: 'âœ… Reading file... 12,450 records detected', progress: 10, delay: 600 },
        { text: 'âœ… 9,750 profiles parsed successfully', progress: 30, delay: 1200 },
        { text: 'âœ… 8,200 skills extracted', progress: 50, delay: 1800 },
        { text: 'âœ… 6,100 job titles normalized', progress: 65, delay: 2400 },
        { text: 'ğŸ”„ Generating embeddings for semantic search...', progress: 80, delay: 3000 },
        { text: 'âœ… Embeddings generated', progress: 90, delay: 3800 },
        { text: 'âœ… Response likelihood scores calculated', progress: 100, delay: 4400 },
      ];

      steps.forEach((step, i) => {
        setTimeout(() => {
          const line = document.createElement('div');
          line.style.cssText = 'padding: 6px 0; animation: fadeIn 0.3s ease;';
          line.textContent = step.text;
          if (step.text.startsWith('ğŸ”„')) {
            line.classList.add('animate-pulse');
          }
          log.appendChild(line);

          // Update progress bar
          const bar = document.querySelector('.progress-fill');
          const pct = document.querySelector('.progress-percent');
          const status = document.querySelector('.progress-status');
          if (bar) bar.style.width = step.progress + '%';
          if (pct) pct.textContent = step.progress + '%';
          if (status) status.textContent = step.text.replace(/^[âœ…ğŸ”„â³]\s*/, '');

          // Fix the spinning line once embeddings complete
          if (i === 5) {
            const spinningLine = log.querySelector('.animate-pulse');
            if (spinningLine) {
              spinningLine.classList.remove('animate-pulse');
              spinningLine.textContent = 'âœ… Embeddings generated for semantic search';
            }
          }

          // Show ready step
          if (i === steps.length - 1) {
            setTimeout(() => {
              document.getElementById('step-processing').style.display = 'none';
              document.getElementById('step-ready').style.display = 'block';

              // Trigger counter animations
              document.querySelectorAll('.stat-value[data-count]').forEach(el => {
                const target = parseInt(el.dataset.count);
                animateCounter(el, target);
              });
            }, 800);
          }
        }, step.delay);
      });
    }
  </script>
</body>

</html>