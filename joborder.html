<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jia Sourcing ‚Äî Create Job Order</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--jia-text-secondary);
            margin-bottom: 6px;
            letter-spacing: 0.01em;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            font-family: 'Satoshi', sans-serif;
            color: var(--jia-text-primary);
            background: #fff;
            transition: border-color 0.2s;
            box-sizing: border-box;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #32325d;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 16px;
        }

        .form-hint {
            font-size: 11px;
            color: var(--jia-text-muted);
            margin-top: 4px;
        }

        /* Tabs */
        .tab-bar {
            display: flex;
            gap: 0;
            margin-bottom: 28px;
            border-bottom: 2px solid #eef2f7;
        }

        .tab-btn {
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            background: transparent;
            color: var(--jia-text-muted);
            font-family: 'Satoshi', sans-serif;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
        }

        .tab-btn.active {
            color: var(--jia-text-primary);
            border-bottom-color: var(--jia-black);
        }

        .tab-btn:hover {
            color: var(--jia-text-secondary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* AI extract section */
        .paste-box {
            border: 2px dashed #e2e8f0;
            border-radius: 14px;
            padding: 32px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background: #fafbfc;
        }

        .paste-box:hover {
            border-color: #32325d;
            background: #f8fafc;
        }

        .paste-box textarea {
            width: 100%;
            min-height: 180px;
            border: none;
            background: transparent;
            font-size: 14px;
            font-family: 'Satoshi', sans-serif;
            color: var(--jia-text-primary);
            resize: vertical;
            text-align: left;
            box-sizing: border-box;
        }

        .paste-box textarea:focus {
            outline: none;
        }

        .paste-box textarea::placeholder {
            color: var(--jia-text-muted);
            text-align: center;
        }

        /* AI extraction animation */
        .extract-animation {
            display: none;
            padding: 24px;
            text-align: center;
        }

        .extract-animation.active {
            display: block;
        }

        .extract-step {
            font-size: 13px;
            color: var(--jia-text-muted);
            margin: 8px 0;
        }

        .extract-step.done {
            color: #059669;
        }

        .extract-step.current {
            color: var(--jia-text-primary);
            font-weight: 600;
        }

        /* Skills input */
        .skills-input-area {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }

        .skill-pill {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 6px 12px;
            background: rgba(159, 202, 237, 0.15);
            border: 1px solid rgba(159, 202, 237, 0.3);
            border-radius: 20px;
            font-size: 13px;
            color: #2b6cb0;
            font-weight: 500;
        }

        .skill-pill .remove {
            cursor: pointer;
            font-size: 14px;
            color: #8898aa;
            margin-left: 2px;
            line-height: 1;
        }

        .skill-pill .remove:hover {
            color: #dc2626;
        }

        .add-skill-input {
            border: none;
            background: transparent;
            font-size: 13px;
            font-family: 'Satoshi', sans-serif;
            color: var(--jia-text-primary);
            outline: none;
            min-width: 120px;
        }
    </style>
</head>

<body>
    <div class="app-layout">
        <aside class="sidebar" id="sidebar"></aside>

        <main class="main-content">
            <div class="breadcrumb">
                <a href="index.html">Sourcing</a>
                <span class="sep">‚Ä∫</span>
                <a href="search.html">Search</a>
                <span class="sep">‚Ä∫</span>
                <span>New Job Order</span>
            </div>

            <div class="page-header" style="display: flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <h1>üìã Create Job Order</h1>
                    <p class="subtitle">Define what you're looking for ‚Äî Jia will find the best matches</p>
                </div>
            </div>

            <!-- Tabs: AI Extract vs Manual -->
            <div class="tab-bar">
                <button class="tab-btn active" onclick="switchTab('ai')">‚ú® Paste Job Description</button>
                <button class="tab-btn" onclick="switchTab('manual')">üìù Fill in Manually</button>
            </div>

            <!-- Tab 1: AI Extract -->
            <div id="tab-ai" class="tab-content active">
                <div class="glass-card no-hover" style="margin-bottom: 24px;">
                    <h3 style="font-size: 15px; margin-bottom: 6px; color: var(--jia-text-primary);">Paste a job
                        description</h3>
                    <p style="font-size: 13px; color: var(--jia-text-muted); margin-bottom: 16px;">
                        Jia's AI will extract the role title, skills, location, experience level, and salary range
                        automatically.
                    </p>
                    <div class="paste-box" id="pasteBox">
                        <textarea id="jdInput"
                            placeholder="Paste the full job description here...

e.g. &quot;We are looking for a Senior Accountant to join ABC Corp in Cebu City. The ideal candidate has a CPA license, 3+ years of experience in public accounting, proficiency in QuickBooks, and strong financial reporting skills. Salary range: ‚Ç±40,000‚Äì‚Ç±55,000/month.&quot;"></textarea>
                    </div>
                    <div class="extract-animation" id="extractAnimation">
                        <div style="font-size: 20px; margin-bottom: 12px;">‚ú®</div>
                        <div class="extract-step" id="step1">Reading job description...</div>
                        <div class="extract-step" id="step2">Extracting role & company info...</div>
                        <div class="extract-step" id="step3">Identifying required skills...</div>
                        <div class="extract-step" id="step4">Determining experience & salary range...</div>
                        <div class="extract-step" id="step5">Building search criteria...</div>
                    </div>
                    <div style="margin-top: 16px; display: flex; gap: 8px;">
                        <button class="btn-primary" onclick="extractFromJD()">‚ú® Extract with AI</button>
                        <button class="btn-secondary" onclick="clearJD()">Clear</button>
                    </div>
                </div>
            </div>

            <!-- Tab 2: Manual Form -->
            <div id="tab-manual" class="tab-content">
                <div id="manualForm">
                    <!-- This is also shown after AI extraction -->
                </div>
            </div>

            <!-- Structured Form (shown in manual tab OR after AI extraction) -->
            <div class="glass-card no-hover" id="structuredForm" style="margin-bottom: 24px;">
                <h3 style="font-size: 15px; margin-bottom: 20px; color: var(--jia-text-primary);">Job Order Details</h3>

                <div class="form-row" style="margin-bottom: 20px;">
                    <div class="form-group">
                        <label class="form-label">Job Title</label>
                        <input class="form-input" id="f-title" type="text" placeholder="e.g. Senior Accountant">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company</label>
                        <input class="form-input" id="f-company" type="text" placeholder="e.g. ABC Corp">
                    </div>
                </div>

                <div class="form-row" style="margin-bottom: 20px;">
                    <div class="form-group">
                        <label class="form-label">Location</label>
                        <input class="form-input" id="f-location" type="text" placeholder="e.g. Cebu City">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Work Arrangement</label>
                        <select class="form-select" id="f-arrangement">
                            <option>On-site</option>
                            <option>Remote</option>
                            <option>Hybrid</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Required Skills</label>
                    <div class="skills-input-area"
                        style="border: 1px solid #e2e8f0; border-radius: 10px; padding: 10px 14px; min-height: 44px;"
                        id="skillsArea">
                        <span class="skill-pill">CPA <span class="remove"
                                onclick="this.parentElement.remove()">√ó</span></span>
                        <span class="skill-pill">QuickBooks <span class="remove"
                                onclick="this.parentElement.remove()">√ó</span></span>
                        <span class="skill-pill">Financial Reporting <span class="remove"
                                onclick="this.parentElement.remove()">√ó</span></span>
                        <input class="add-skill-input" placeholder="+ Add skill" onkeydown="addSkill(event)">
                    </div>
                    <div class="form-hint">Press Enter to add a skill</div>
                </div>

                <div class="form-row-3" style="margin-bottom: 20px;">
                    <div class="form-group">
                        <label class="form-label">Experience (min years)</label>
                        <input class="form-input" id="f-exp" type="number" value="3" min="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Salary Min (‚Ç±/month)</label>
                        <input class="form-input" id="f-salary-min" type="text" placeholder="40,000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Salary Max (‚Ç±/month)</label>
                        <input class="form-input" id="f-salary-max" type="text" placeholder="55,000">
                    </div>
                </div>

                <div class="form-row" style="margin-bottom: 20px;">
                    <div class="form-group">
                        <label class="form-label">Spots to Fill</label>
                        <input class="form-input" id="f-spots" type="number" value="1" min="1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Urgency</label>
                        <select class="form-select" id="f-urgency">
                            <option>Normal</option>
                            <option>Urgent ‚Äî Fill within 2 weeks</option>
                            <option>Critical ‚Äî Immediate start needed</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Additional Notes</label>
                    <textarea class="form-textarea"
                        placeholder="Any other requirements, nice-to-haves, or context for the AI to consider..."></textarea>
                </div>

                <div
                    style="display: flex; gap: 10px; margin-top: 24px; padding-top: 20px; border-top: 1px solid #eef2f7;">
                    <a href="results.html" class="btn-primary">üîç Save & Search Candidates</a>
                    <button class="btn-secondary" onclick="showToast('Job order saved as draft')">üíæ Save Draft</button>
                    <a href="search.html" class="btn-ghost" style="padding: 10px 20px;">Cancel</a>
                </div>
            </div>

        </main>
    </div>

    <script src="app.js"></script>
    <script>
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

            if (tab === 'ai') {
                document.querySelectorAll('.tab-btn')[0].classList.add('active');
                document.getElementById('tab-ai').classList.add('active');
            } else {
                document.querySelectorAll('.tab-btn')[1].classList.add('active');
                document.getElementById('tab-manual').classList.add('active');
            }
        }

        function extractFromJD() {
            const jd = document.getElementById('jdInput').value;
            if (!jd.trim()) {
                showToast('Please paste a job description first');
                return;
            }

            // Show extraction animation
            const pasteBox = document.getElementById('pasteBox');
            const anim = document.getElementById('extractAnimation');
            pasteBox.style.display = 'none';
            anim.classList.add('active');

            const steps = ['step1', 'step2', 'step3', 'step4', 'step5'];
            let i = 0;

            const interval = setInterval(() => {
                if (i > 0) {
                    document.getElementById(steps[i - 1]).classList.remove('current');
                    document.getElementById(steps[i - 1]).classList.add('done');
                    document.getElementById(steps[i - 1]).innerHTML = '‚úì ' + document.getElementById(steps[i - 1]).textContent;
                }
                if (i < steps.length) {
                    document.getElementById(steps[i]).classList.add('current');
                    i++;
                } else {
                    clearInterval(interval);
                    // Fill in the form
                    setTimeout(() => {
                        document.getElementById('f-title').value = 'Senior Accountant';
                        document.getElementById('f-company').value = 'ABC Corp';
                        document.getElementById('f-location').value = 'Cebu City';
                        document.getElementById('f-exp').value = '3';
                        document.getElementById('f-salary-min').value = '40,000';
                        document.getElementById('f-salary-max').value = '55,000';
                        document.getElementById('f-spots').value = '5';
                        showToast('AI extracted job order details ‚Äî review and adjust below');
                        document.getElementById('structuredForm').scrollIntoView({ behavior: 'smooth', block: 'start' });
                        document.getElementById('structuredForm').style.borderColor = '#34d399';
                        setTimeout(() => {
                            document.getElementById('structuredForm').style.borderColor = '';
                        }, 2000);
                    }, 400);
                }
            }, 600);
        }

        function clearJD() {
            document.getElementById('jdInput').value = '';
            document.getElementById('pasteBox').style.display = 'block';
            document.getElementById('extractAnimation').classList.remove('active');
            // Reset steps
            ['step1', 'step2', 'step3', 'step4', 'step5'].forEach(id => {
                const el = document.getElementById(id);
                el.classList.remove('done', 'current');
                el.textContent = el.textContent.replace('‚úì ', '');
            });
        }

        function addSkill(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                const input = event.target;
                const value = input.value.trim();
                if (value) {
                    const pill = document.createElement('span');
                    pill.className = 'skill-pill';
                    pill.innerHTML = value + ' <span class="remove" onclick="this.parentElement.remove()">√ó</span>';
                    input.parentElement.insertBefore(pill, input);
                    input.value = '';
                }
            }
        }
    </script>
</body>

</html>